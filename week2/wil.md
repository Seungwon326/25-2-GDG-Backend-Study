# 2주차 - 계층형 아케텍쳐와 컨트롤러, 서비스

- 스프링 계층형 아키텍쳐
    - Browser ↔ Controller ↔ Service ↔ DAO ↔ DB    
            (DTO)        (DTO)     (DTO) (Entity)
        
        | **계층** | **역할** | **비유** |
        | --- | --- | --- |
        | Controller | HTTP 요청/응답 처리 (입구) | 웨이터 |
        | Service | 비즈니스 로직 처리 | 주방장 |
        | Repository (DAO) | 데이터베이스 접근 | 창고 관리자 |
        | DB | 실제 데이터 저장소 | 냉장/냉동 창고 |
    
    | **구분** | **설명** | **비유** |
    | --- | --- | --- |
    | DTO (Data Transfer Object) | 필요한 데이터만 담는 전송용 객체 | 주문서, 영수증 |
    | Entity | DB 테이블과 매핑되는 핵심 객체 | 원재료 |
    - Controller layer
        - HTTP 요청/응답
        - 특정 URL로 요청을 가장 먼저 처리
        - DTO를 사용하여 서비스 계층과 데이터를 주고받음
- 패키지 구조
    - 계층형 구조
        - 애플리케이션을 기능별로 나눔
    - **도메인형 구조**
        - 도메인 관련 모든 클래스를 포함
- HTTP 상태 코드

| **코드** | **의미** |
| --- | --- |
| 200 OK | 요청 성공 |
| 201 Created | 데이터 생성 성공 |
| 204 No Content | 성공했지만 반환 데이터 없음 |
| 400 Bad Request | 클라이언트 요청 오류 |
| 404 Not Found | 요청 데이터 없음 |
| 500 Internal Server Error | 서버 내부 오류 |
- Service layer
    - 애플리케이션의 비즈니스 로직이 담기는 계층
    - 레포지토리 계층과 소통 with 엔티티 or DTO
    - 컨트롤러와 레포지토리 사이의 중간 다리
    - 원자성을 보장하기 위해 트랜잭션 단위로 처리
        - 서비스 계층 메서드 위에 @transaction을 붙이면 끝
- 스프링 빈(Spring Bean)
    - 스프링 컨테이너가 직접 생성하고 관리하는 객체
        - 스프링 컨테이너 - 스프링 빈 저장소 / 어플리케이션 컨텍스트
    - 어플리케이션 전역에서 사용할 공용 객체
    - 스프링 컨테이너에 빈을 저장하고 필요한 빈을 컨테이너에서 받아서 사용
        - 빈은 빈만 요구 가능
- 의존성 주입
    - 내가 의존하는 객체를 직접 생성하지 않고 밖에서 주입 받는 것
    - 장점
        - 매번 필요한 새로운 객체 생성할 필요 없음
        - 생성해둔 객체를 사용하므로 메모리를 효율적으로 사용
    - 의존성 주입 방법
        - 생성자 주입 방법
            - 필요한 의존성을 final 키워드를 사용해 추가
